# -*- mode: python -*-

Import("env")

env.StaticLibrary(
    target='socket',
    source=[
        'httpclient.cpp',
        'listen.cpp',
        'message.cpp',
        'message_port.cpp',
        'sock.cpp',
        'ssl_manager.cpp',
    ],
    LIBDEPS=[
        '$BUILD_DIR/mongo/bson',
        '$BUILD_DIR/mongo/db/common',
        '$BUILD_DIR/mongo/foundation',
        'socket_init'
    ],
)

env.CppUnitTest('sock_test', ['sock_test.cpp'],
                LIBDEPS=['$BUILD_DIR/mongo/mongocommon',
                         'socket'],
                NO_CRUTCH=True)

env.StaticLibrary(
    target='socket_init',
    source='socket_init.cpp')
